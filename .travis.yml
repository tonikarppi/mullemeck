language: python
dist: xenial
python:
    - '3.7'
cache:
    pip: true
    directories:
        - '$HOME/.cache/pypoetry'
        - '$HOME/.cache/pre-commit'
before_install:
    - pip install pip -U
    - pip install poetry
install:
    - poetry install -v
script:
    - pytest -q tests/
    - pre-commit run --all-files
